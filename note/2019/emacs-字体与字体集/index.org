#+SETUPFILE: ../../setup.org
#+TITLE: Emacsï¼Œå­—ä½“ä¸å­—ç¬¦é›†
#+DATE: <2019-03-31 Sun 21:27>

-----

*å†™åœ¨å‰é¢*

æ–‡ç« è½¬è½½è‡ª[[https://idiocy.org/emacs-fonts-and-fontsets.html][Emacs, fonts and fontsets]]ï¼ŒåŸä½œè€…ä¸ºAlan Thirdã€‚

ä¸­è‹±æ–‡åè¯å¯¹ç…§ï¼š

| ä¸­æ–‡   | English |
|--------+---------|
| æ–‡æ¡£   | buffer  |
| çª—å£   | window  |
| çª—ä½“   | frame   |
| å­—ä½“é›† | fontset |
| å­—ç¬¦é›† | charset |

ä»¥ä¸‹æ˜¯æ­£æ–‡

-----

æˆ‘ä¸€ç›´å¯¹Emacsçš„å­—ä½“ç³»ç»Ÿä¸ç”šäº†è§£ã€‚è™½ç„¶å­—ç¬¦é›†æ˜æ˜¾æ˜¯æˆ‘å¾ˆå¤šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯æˆ‘ä¸€ç›´æ²¡æ³•ææ˜ç™½æ€ä¹ˆç”¨å®ƒã€‚æˆ‘æ‰“ç®—åœ¨è¿™ç¯‡æ–‡ç« é‡Œè®°ä¸‹åœ¨Emacsé‡Œè®¾ç½®å­—ä½“çš„æ–¹æ³•ã€‚

* è®¾ç½®é»˜è®¤å­—ä½“

çœ‹èµ·æ¥åœ¨Emacsé‡Œè®¾ç½®é»˜è®¤å­—ä½“æœ‰ä¸å°‘é€”å¾„ï¼Œæˆ‘ç”¨çš„æ˜¯è¿™ä¸ªï¼š

#+BEGIN_SRC emacs-lisp
(set-face-attribute 'default nil :font "Droid Sans Mono")
#+END_SRC

è¿™ä¼šä¿®æ”¹é»˜è®¤å­—ä½“é›†ï¼Œä»è€Œä¸ºæ‰€æœ‰çª—ä½“è®¾ç½®å­—ä½“ã€‚

* è®¾ç½®åå¤‡å­—ä½“

ä½†æ˜¯å¦‚æœä½ åœ¨ä¸åŒè®¾å¤‡ä¸Šç”¨åŒä¸€ç§å­—ä½“é…ç½®ï¼Œæˆ–è€…ä½ é€‰æ‹©çš„å­—ä½“æ²¡æœ‰åŒ…æ‹¬æ‰€æœ‰å¿…
éœ€çš„å­—å½¢å‘¢ï¼ŸEmacsé»˜è®¤ä¼šæœç´¢æ‰€æœ‰å­—ä½“ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåŒ…æ‹¬äº†éœ€è¦å­—å½¢çš„å­—ä½“ï¼Œ
ä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹å……æ»¡å¶ç„¶ï¼Œå¹¶ä¸”å¯èƒ½å¾ˆæ…¢[fn:1]ã€‚

Emacså…è®¸ä½ æŒ‡å®šåå¤‡å­—ä½“ã€‚ç»™é»˜è®¤å­—ä½“é›†è®¾ç½®åå¤‡å­—ä½“å¯ä»¥è¿™ä¹ˆå†™ï¼š

#+BEGIN_SRC emacs-lisp
(set-fontset-font t nil "Courier New" nil 'append)
#+END_SRC

ç¬¬ä¸€ä¸ªå‚æ•°ç”¨ =t= æ„å‘³æ›´æ–°é»˜è®¤å­—ä½“é›†ã€‚åˆ›å»ºå…¶ä»–å­—ä½“é›†å¹¶ä½¿ç”¨å®ƒä»¬æ˜¯å¯èƒ½çš„ï¼Œ
ä½†æ˜¯æˆ‘ä»æ²¡æˆåŠŸè¿‡ã€‚æ‰€ä»¥æˆ‘å€¾å‘äºç›´æ¥æ”¹é»˜è®¤å­—ä½“é›†ã€‚ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šå­—å½¢èŒƒå›´ï¼Œ
æˆ‘ä»¬ä¹‹åä¼šæåˆ°ã€‚æœ€åä¸€ä¸ªå‚æ•°ï¼Œ =â€™append= ï¼Œå‘Šè¯‰Emacsæ·»åŠ è¿™ä¸ªå­—ä½“åˆ°å­—ç¬¦ä½“é›†çš„æœ«å°¾ï¼Œæ‰€ä»¥è¿™ä¸ªå­—ä½“ä¼šåœ¨å…¶ä»–å­—ä½“é›†é‡Œçš„å­—ä½“éƒ½æœç´¢è¿‡äº†ä»¥åæ‰è¢«æœç´¢åˆ°ã€‚
ä½ ä¹Ÿå¯ä»¥ç”¨ =â€™prepend= ï¼Œè¿™ä¼šæŠŠå­—ä½“æ”¾åœ¨å­—ä½“é›†çš„å¼€å¤´ï¼Œä½†ä¾ç„¶åœ¨é»˜è®¤å­—ä½“çš„
åé¢ã€‚

* ä¸ºæŒ‡å®šå­—å½¢è®¾ç½®å­—ä½“

å›åˆ°ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šå­—å½¢èŒƒå›´çš„é‚£ä¸ªã€‚ä½ å¯ä»¥æŒ‡å®šå•ç‹¬çš„å­—å½¢ã€å­—å½¢åŒºé—´ã€å­—ç¬¦é›†æˆ–è€…è¯­è¨€ã€‚

å‡è®¾ä½ æƒ³è®©ğŸ˜Šç”¨æŸä¸ªå­—ä½“ã€‚

#+BEGIN_SRC emacs-lisp
(set-fontset-font t ?ğŸ˜Š "Segoe UI Emoji")
#+END_SRC

æˆ–è€…ä½ ä¹Ÿå¯ä»¥æŒ‡å®šåŒºé—´ã€‚

#+BEGIN_SRC emacs-lisp
(set-fontset-font t '(?ğŸ˜Š . ?ğŸ˜) "Segoe UI Emoji")
#+END_SRC

ä½ ä¸èƒ½è®¾ç½®ASCIIå­—ç¬¦ï¼ŒEmacsä¸å…è®¸ã€‚

* ä¸ºä¸åŒå­—ç¬¦å’Œè¯­è¨€è®¾ç½®å­—ä½“

å‡è®¾ä½ å¤„ç†å¾ˆå¤šæ³°è¯­ï¼Œä½†æ˜¯ä½ çš„é»˜è®¤å­—ä½“ä¸æ”¯æŒæ³°è¯­ï¼Œæˆ–è€…ä½ å°±æ˜¯å¾ˆå–œæ¬¢å¦ä¸€ä¸ªå­—ä½“çš„æ³°è¯­å­—ç¬¦çš„æ ·å­ã€‚

æŸ¥çœ‹ =script-representative-chars= å’Œ =list-charset-chars= çœ‹çœ‹ä½ æƒ³è¦çš„è¯­è¨€åœ¨ä¸åœ¨é‡Œé¢ï¼Œåœ¨çš„è¯å°±ç”¨é‚£ä¸ªåå­—ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸Šç”¨ =describe-char= ï¼Œç„¶åçœ‹ *charset* æˆ– *script* é¡¹ã€‚

#+BEGIN_SRC emacs-lisp
(set-fontset-font t 'thai "Noto Sans Thai")
#+END_SRC

è¿™ä¸ªä¼šç»™Emacsæå¤§çš„åŠ é€Ÿï¼Œå› ä¸ºEmacsä¸å†éœ€è¦è·‘éå‡ ç™¾ä¸ªå­—ä½“äº†ã€‚

å¦‚æœä½ éœ€è¦ç»™æ³°è¯­è®¾ç½®ä¸€ä¸ªåå¤‡å­—ä½“ï¼Œåªéœ€è¦åƒä¹‹å‰ä¸€æ ·ã€‚

#+BEGIN_SRC emacs-lisp
(set-fontset-font t 'thai "Leelawadee UI" nil 'append)
#+END_SRC

è¿™ä¸ªçš„ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœä½ åœ¨æ²¡æœ‰ä½ æŒ‡å®šçš„å­—ä½“çš„æœºå™¨ä¸Šç”¨åŒæ ·çš„é…ç½®ï¼ŒEmacsä¸ä¼šåƒä¹‹å‰ä¸€æ ·æœç´¢å¯ç”¨çš„å­—ä½“ï¼ŒEmacsä¼šç›´æ¥ç»™ä½ ä¸€å †æ–¹å—ã€‚ä¸è¿‡ä¸è¦æ‹…å¿ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡font-specå¼ºè¿«Emacsæœç´¢ã€‚

#+BEGIN_SRC emacs-lisp
(set-fontset-font t 'thai (font-spec :script 'thai) nil 'append)
#+END_SRC

ä½ å¯ä»¥æŠŠéšä¾¿ä»€ä¹ˆæ”¾åœ¨ =font-spec= çš„è°ƒç”¨é‡Œï¼Œç„¶åEmacså°±ä¼šæœç´¢å­—ä½“ï¼Œæ‰¾å‡ºåˆé€‚çš„ã€‚ä½ ä¹Ÿå®Œå…¨å¯ä»¥ç”¨ =font-spec= æŒ‡å®šä¸€ä¸ªå­—ä½“ã€‚

æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å®Œæ•´çš„æ³°è¯­é…ç½®çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

#+BEGIN_SRC emacs-lisp
(set-fontset-font t 'thai "Noto Sans Thai")
(set-fontset-font t 'thai "Leelawadee UI" nil 'append)
(set-fontset-font t 'thai (font-spec :script 'thai) nil 'append)
#+END_SRC

æ³¨æ„ä½ åªèƒ½åœ¨æŸå„å­—ç¬¦åŒºé—´å·²ç»æœ‰äº†å­—ä½“é…ç½®çš„æ—¶å€™åé™„ï¼ˆappendï¼‰æˆ–å‰ç½®ï¼ˆprependï¼‰å­—ä½“ï¼Œè¿™ä¹Ÿç¬¦åˆå¸¸ç†ã€‚ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæˆ‘æ˜¯å¾€ä¸€ä¸ªå¤§çš„å­—ä½“åˆ—è¡¨åé¢æ·»åŠ æˆ‘çš„åå¤‡å­—ä½“ï¼Œè€Œä¸æ˜¯å¾€ä¸€ç³»åˆ—å­—ä½“åˆ—è¡¨ä¸­çš„ä¸€ä¸ªåé¢æ·»åŠ å­—ä½“ã€‚è¿™å¯¼è‡´æˆ‘æ— æ³•ç†è§£ä¸ºå•¥é…ç½®æ²¡æœ‰æ•ˆæœã€‚

* å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªå­—ä½“æ˜¯å¦å·²ç»å®‰è£…

ä¸å…¶ä¾èµ–åå¤‡å­—ä½“ï¼Œä½ å¯ä»¥åœ¨ä½¿ç”¨ä¸€ä¸ªå­—ä½“ä¹‹å‰æ£€æŸ¥è¿™ä¸ªå­—ä½“æ˜¯å¦å·²ç»å®‰è£…ã€‚è¿‡ç¨‹ç®€å•ç›´æ¥ï¼Œå› ä¸ºæ‰€æœ‰å·²å®‰è£…çš„å­—ä½“éƒ½åœ¨ =font-family-list= [fn:2] é‡Œï¼Œä½ å¯ä»¥ç›´æ¥æŸ¥çœ‹åˆ—è¡¨ï¼š

#+BEGIN_SRC emacs-lisp
(member "Noto Sans" (font-family-list))
#+END_SRC

* é™„å½•

æˆ‘ä¸ºä¸€äº›è¯­è¨€å†™äº†åå¤‡åˆ°Notoå­—ä½“çš„åŸºæœ¬é…ç½®ï¼Œè¯•å›¾æé«˜Emacsçš„Hello fileï¼ˆ =C-h h= ï¼‰çš„é€Ÿåº¦ã€‚å› ä¸ºè¿™äº›å­—ä½“æœ¬èº«æ²¡æœ‰åå¤‡å­—ä½“ï¼Œå¦‚æœæˆ‘åœ¨æ²¡æœ‰è¿™äº›å­—ä½“çš„æœºå™¨ä¸Šç”¨è¿™ä¸ªé…ç½®ï¼Œé‚£ä¹ˆæˆ‘åªä¼šçœ‹è§ä¸€åœ°æ–¹å—ã€‚ä½†æ˜¯è¿™ä¸ªä¼°è®¡èƒ½ç»™ä½ çš„é…ç½®ä¸€ä¸ªèµ·ç‚¹ã€‚

#+BEGIN_SRC emacs-lisp
(set-face-attribute 'default nil :font "Droid Sans Mono")

;; Latin
(set-fontset-font t 'latin "Noto Sans")

;; East Asia: ä½ å¥½, æ—©æ™¨, ã“ã‚“ã«ã¡ã¯, ì•ˆë…•í•˜ì„¸ìš”
;;
;; Make sure you use the right font. See
;; https://www.google.com/get/noto/help/cjk/.
;;
;; This font requires "Regular". Other Noto fonts dont.
;; Â¯\_(ãƒ„)_/Â¯
(set-fontset-font t 'han "Noto Sans CJK SC Regular")
(set-fontset-font t 'kana "Noto Sans CJK JP Regular")
(set-fontset-font t 'hangul "Noto Sans CJK KR Regular")
(set-fontset-font t 'cjk-misc "Noto Sans CJK KR Regular")

;; South East Asia: á‡áŸ†ášá¶á”áŸá½áš, àºªàº°àºšàº²àºàº”àºµ, á€™á€„á€ºá€¹á€‚á€œá€¬á€•á€«, à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š
(set-fontset-font t 'khmer "Noto Sans Khmer")
(set-fontset-font t 'lao "Noto Sans Lao")
(set-fontset-font t 'burmese "Noto Sans Myanmar")
(set-fontset-font t 'thai "Noto Sans Thai")

;; Africa: áˆ áˆ‹áˆ
(set-fontset-font t 'ethiopic "Noto Sans Ethiopic")

;; Middle/Near East: ×©×œ×•×, Ø§Ù„Ø³Ù‘Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…
(set-fontset-font t 'hebrew "Noto Sans Hebrew")
(set-fontset-font t 'arabic "Noto Sans Arabic")

;;  South Asia: àª¨àª®àª¸à«àª¤à«‡, à¤¨à¤®à¤¸à¥à¤¤à¥‡, à²¨à²®à²¸à³à²•à²¾à²°, à´¨à´®à´¸àµà´•à´¾à´°à´‚, à¬¶à­à¬£à¬¿à¬¬à­‡,
;;              à¶†à¶ºà·”à¶¶à·à·€à¶±à·Š, à®µà®£à®•à¯à®•à®®à¯, à°¨à°®à°¸à±à°•à°¾à°°à°‚, à½–à½€à¾²à¼‹à½¤à½²à½¦à¼‹à½–à½‘à½ºà¼‹à½£à½ºà½‚à½¦à¼
(set-fontset-font t 'gujarati "Noto Sans Gujarati")
(set-fontset-font t 'devanagari "Noto Sans Devanagari")
(set-fontset-font t 'kannada "Noto Sans Kannada")
(set-fontset-font t 'malayalam "Noto Sans Malayalam")
(set-fontset-font t 'oriya "Noto Sans Oriya")
(set-fontset-font t 'sinhala "Noto Sans Sinhala")
(set-fontset-font t 'tamil "Noto Sans Tamil")
(set-fontset-font t 'telugu "Noto Sans Telugu")
(set-fontset-font t 'tibetan "Noto Sans Tibetan")
#+END_SRC

[fn:1] Emacsé»˜è®¤çš„åå¤‡å­—ä½“æ˜¯[[http://users.teilar.gr/~g1951d/][Symbola]]ï¼Œæ‰€ä»¥æœ€å¥½å®‰è£…ä¸Šè¿™ä¸ªä»¥å…Emacséå†æ‰€æœ‰å­—ä½“

[fn:2] å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹[[http://ergoemacs.org/emacs/emacs_list_and_set_font.html][Xah Leeçš„å­—ä½“é…ç½®é¡µ]]
