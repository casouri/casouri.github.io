/* This is the new stylesheet used by new blogs on Pollen. */
/* This style sheet configures the basic style across the whole site. */

@import url("./typeface.css");

html {
    --background: #fefcfc;
    /* --foreground: #202010; */
    /* --foreground: #101010; */
    --foreground: #000000;
    --toc-size: 17px;
    --header-size: 18px;
    --body-size: 20px; /* This is 15 pt for Charter. */
    --title-size: 50px;
    --h2-size: 22px;
    --mono-size: 16px;
    --footer-size: 16px;
    --small-size: 17px;
    --small-code-size: 15px;
    --star-size: 20px;
    --sup-size: 15px;
}

body {
    /* font-family: Charter, "方正FW筑紫明朝R改", ui-serif, serif; */
    font-family: Academica, "方正FW筑紫明朝R改", ui-serif, serif;
    font-size: var(--body-size); /* This is 15 pt. */
    line-height: 1.3;
    background-color: var(--background);
    color: var(--foreground);
    margin-bottom: 3em;
}

body:lang(zh) {
    line-height: 1.55;
}

blockquote { font-style: italic; }

blockquote:lang(zh) {
    font-style: normal;
    font-family: Academica, "方正聚珍新仿", ui-serif, serif;
}

html:lang(zh) p {
    /* text-align: justify; */
}

/*** Macro markups */

.cjk-emphasize {
    text-emphasis-position: under right;
    text-emphasis-style: dot;
}

.zh-alt { font-family: "方正聚珍新仿", ui-serif, serif; }

.full-width-mark { font-family: "方正FW筑紫明朝R改", ui-serif, serif; }

.squeeze, .last-punc-in-link { font-feature-settings: "halt"; }

.jpns { font-family: Charter, Source Han Serif JP, ui-serif, serif; }

.trad { font-family: Source Han Serif TC; }

.center {
    display: flex;
    justify-content: center;
}

.nobreak {
    white-space: nowrap;
}

/*** Colors */

::selection {
    color: var(--background);
    background-color: var(--foreground);
}

:link, :visited {
    color: var(--foreground);
    /* text-decoration: underline; */
    /* text-decoration-style: dotted; */
    /* text-underline-offset: 0.15em; */
}

a { text-decoration: none; }

a:hover {
    background: #fbeaea;
    transition-property: background;
    transition-duration: 0.2s;

    border-radius: 8px;
}

a:after {
    /* Asterisk has size and height issue, emoji characters are displayed
       as emoji in some places, the rest symbol Unicode are good (like
       this one). */
    margin-left: 0.1rem;
    content: "\FEFF✶";
    color: #933;
    /* We fix the size of the ✶ symbol. If we use relative font size, it
       becomes too small in small text. */
    font-size: 16px;
    font-family: Charter;
    /* Align to top so it looks like superscript when the body text is
       large. And when the body text is small, the symbol looks like
       inline and doesn’t heighten the line. */
    vertical-align: top;
    font-weight: bold;
}
.obviously-a-link a:after { content: none; }
a.obviously-a-link:after { content: none; }

hr { border-color: var(--foreground); }

/*** Body text */

.title h1 {
    font-weight: normal;
    font-size: 50px;
    margin: 0;
}
.title {
    margin-top: 1rem;
    margin-bottom: 1rem;
}

.subtitle {
    margin: 0;
    /* color: gray; */
    /* font-size: 0.9em; */
    font-style: italic;
}

h2, h3 {
    margin-top: calc((4rem - var(--h2-size)) / 2);
    margin-bottom: calc((4rem - var(--h2-size)) / 2);
    /* Same as body text. */
    font-size: var(--h2-size);
}

h2 { font-weight: bold; }
h3 {
    font-style: italic;
    font-weight: normal;
}

p {
    margin-top: 1rem;
    margin-bottom: 1rem;
}

code, pre.code-block {
    font-family: IBM Plex Mono, ui-mono, monospace;
    /* overflow-x: scroll; */
    font-size: var(--mono-size);
}

figcaption {
    margin-top: 1em;
    font-size: 15px;
    text-align: center;
}

figure {
    /* Override browser default margins. */
    margin-inline-start: 0;
    margin-inline-end: 0;
}

figure img {
    margin: auto;
    display: block;
}

img {
    width: 100%;
    margin: auto;
}

img.half { width: max(50%, 300px); }
img.twothird { width: max(66%, 400px); }

/*** Numbered headers */

body {
    counter-reset: section-counter subsection-counter;
}
.section {
    counter-increment: section-counter;
    counter-reset: subsection-counter;
}
.subsection {
    counter-increment: subsection-counter;
}
.section:before {
    content: counter(section-counter) "\00a0";
}
.subsection:before {
    content: counter(section-counter) "."
             counter(subsection-counter) "\00a0";
}

/*** Header */

#header {
    display: flex;
    flex-wrap: wrap-reverse;
    justify-content: space-between;
    font-family: Helvetica;
    font-size: var(--header-size);
}

#header nav ol {
    list-style-type: none;
    padding-left: 0;
}

#header nav span {
    display: inline-block;
    margin-left: 6px;
    margin-right: 6px;
    font-size: 12px;
    vertical-align: center;
}

/*** Lists */

dt {
    margin-bottom: 0.5rem;
}

/*** Postamble */

#postamble {
    margin-top: 3rem;
    font-size: var(--footer-size);
}

#postamble p {
    margin-bottom: 0;
    margin-top: 0;
}

.like-button { margin-bottom: 3rem; }

/*** Footnote */

.footref-anchor { word-wrap: break-word; }
sup.inline-footref {
    all: revert;
    font-size: var(--sup-size);
    font-family: Charter;
    vertical-align: top;
    font-weight: 900;
    margin-left: 0.1rem;
    text-decoration: none;
    color: #933;
}

.def-footref a {
    margin-right: 1rem;
    color: #933;
    font-weight: 900;
    font-size: var(--small-size);
}

.footdef {
    display: flex;
    font-size: var(--small-size);
    margin-bottom: 1em;
    /* This way links are also set to gray */
    --foreground: gray;
    color: var(--foreground);
}

.footdef code { font-size: var(--small-code-size); }

/*** Tables */

table {
    border-collapse: collapse;
    /* border-style: solid none; */
    /* border-width: 1px 0; */
}

td, th {
    text-align: left;
    padding: 0 1rem;
}

/*** Like button */

button.like {
    display: inline-block;
    padding: 5px 10px;
    border: 2px solid var(--foreground);
    font-size: 20px;
    margin: 0 5px 5px 0;
    /* border-radius:0.12em; */
    box-sizing: border-box;
    text-decoration: none;
    font-family: Helvetica;
    background-color: var(--background);
    text-align: center;
    transition: all 0.2s;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    opacity: 1;
}

button.like:hover {
    background-color: var(--foreground);
    color: var(--background);
}

/*** Etc */

/* Prevent super and subscript from changing line height. */
sup, sub {
    vertical-align: baseline;
    position: relative;
}
sup {
    margin-left: 0.2rem;
    margin-right:0.2rem;
    top: -0.4rem;
    font-weight: bold;
}
sub { top: 0.4rem; }
